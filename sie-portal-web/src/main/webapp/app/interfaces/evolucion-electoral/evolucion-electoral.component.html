<div class="section">

    <h1 *ngIf="lugar" jhiTranslate="evolucionElectoral.header" [translateValues]="{territorio: lugar.nombre}">Historia de la evoluci√≥n electoral en</h1>

    <div class="seleccion-territorio">
        <ac-autocomplete-short-list *ngIf="lugar" name="lugar" [(ngModel)]="lugar" [suggestions]="lugares" [properties]="['nombreConGranularidad']" [disabled]="!lugares" (onSelect)="transition()"></ac-autocomplete-short-list>
        <div *ngIf="!tiposEleccion" class="loader first-loader"></div>
    </div>

    <ngb-tabset *ngIf="tiposEleccion">
        <ngb-tab *ngFor="let tipo of tiposEleccion; index as i">
            <ng-template ngbTabTitle>
                <span jhiTranslate="evolucionElectoral.tipoEleccion.{{tipo}}"></span>
            </ng-template>

            <ng-template ngbTabContent>
                <ac-stacked-bar-chart [data]="hashGraficas[tipo]" [isPercentaje]="hashIndicadoresEnPorcentaje[tipo]"></ac-stacked-bar-chart>

                <div class="selector-indicador">
                    <input id="absoluto-{{i}}" type="radio" name="indicadoresEnPorcentajes" [value]="false" [(ngModel)]="hashIndicadoresEnPorcentaje[tipo]" (change)="onChangeIndicador(tipo)">
                    <label for="absoluto-{{i}}" jhiTranslate="evolucionElectoral.indicador.absoluto">Num Total</label>
                    <input id="porcentaje-{{i}}" type="radio" name="indicadoresEnPorcentajes" [value]="true" [(ngModel)]="hashIndicadoresEnPorcentaje[tipo]" (change)="onChangeIndicador(tipo)">
                    <label for="porcentaje-{{i}}" jhiTranslate="evolucionElectoral.indicador.porcentaje">Porcentaje</label>
                </div>

                <div class="grid-procesos">
                    <table *ngFor="let proceso of hashProcesos[tipo].slice().reverse()" class="proceso-electoral">
                        <thead class="titulo-tabla">
                            <tr>
                                <th>
                                    <!-- <a [routerLink]="['/visualizer', lugar.id, proceso.id]">{{proceso.fechaEleccion | date: 'yyyy'}}</a> -->
                                    {{proceso.fechaEleccion | date: 'yyyy'}}
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>&#45;&nbsp;<span jhiTranslate="evolucionElectoral.indicador.CENSO_INE"></span></td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>&#45;&nbsp;<span jhiTranslate="evolucionElectoral.indicador.VOTANTES_AVANCE_1"></span></td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>&#45;&nbsp;<span jhiTranslate="evolucionElectoral.indicador.VOTANTES_AVANCE_2"></span></td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>&#45;&nbsp;<span jhiTranslate="evolucionElectoral.indicador.CENSO_ESCRUTINIO"></span></td>
                                <td>{{proceso.indicadores['CENSO_ESCRUTINIO'] | number:'1.0-0'}}</td>
                            </tr>
                            <tr>
                                <td>&nbsp;&nbsp;&nbsp;&#45;&nbsp;<span jhiTranslate="evolucionElectoral.indicador.VOTANTES_TOTAL"></span></td>
                                <td>{{proceso.indicadores['VOTANTES_TOTAL'] | number:'1.0-0'}}</td>
                                <td>{{proceso.indicadores['VOTANTES_PORCENTAJE'] | number:'1.1-2'}}&#37;</td>
                            </tr>
                            <tr>
                                <td>&nbsp;&nbsp;&nbsp;&#45;&nbsp;<span jhiTranslate="evolucionElectoral.indicador.ABSTENCION"></span></td>
                                <td>{{proceso.indicadores['ABSTENCION'] | number:'1.0-0'}}</td>
                                <td>{{proceso.indicadores['ABSTENCION_PORCENTAJE'] | number:'1.1-2'}}&#37;</td>
                            </tr>
                            <tr>
                                <td>&#45;&nbsp;<span jhiTranslate="evolucionElectoral.indicador.VOTOS_TOTALES"></span></td>
                                <td>{{proceso.indicadores['VOTANTES_TOTAL'] | number:'1.0-0'}}</td>
                            </tr>
                            <tr>
                                <td>&nbsp;&nbsp;&nbsp;&#45;&nbsp;<span jhiTranslate="evolucionElectoral.indicador.VOTOS_NULOS"></span></td>
                                <td>{{proceso.indicadores['VOTOS_NULOS'] | number:'1.0-0'}}</td>
                                <td>{{proceso.indicadores['VOTOS_NULOS_PORCENTAJE'] | number:'1.1-2'}}&#37;</td>
                            </tr>
                            <tr>
                                <td>&nbsp;&nbsp;&nbsp;&#45;&nbsp;<span jhiTranslate="evolucionElectoral.indicador.VOTOS_VALIDOS"></span></td>
                                <td>{{proceso.indicadores['VOTOS_VALIDOS'] | number:'1.0-0'}}</td>
                                <td>{{proceso.indicadores['VOTOS_VALIDOS_PORCENTAJE'] | number:'1.1-2'}}&#37;</td>
                            </tr>
                            <tr>
                                <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#45;&nbsp;<span jhiTranslate="evolucionElectoral.indicador.VOTOS_BLANCOS"></span></td>
                                <td>{{proceso.indicadores['VOTOS_BLANCOS'] | number:'1.0-0'}}</td>
                                <td>{{proceso.indicadores['VOTOS_BLANCOS_PORCENTAJE'] | number:'1.1-2'}}&#37;</td>
                            </tr>
                            <tr>
                                <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#45;&nbsp;<span jhiTranslate="evolucionElectoral.indicador.PAPELETAS_TOTAL"></span></td>
                                <td>{{proceso.indicadores['PAPELETAS_TOTAL'] | number:'1.0-0'}}</td>
                                <td>{{proceso.indicadores['PAPELETAS_PORCENTAJE'] | number:'1.1-2'}}&#37;</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="download">
                    <button type="button" class="btn btn-sm btn-secondary" [title]="'evolucionElectoral.descargarPdf' | translate" (click)="descargarPdf($event, tipo)">
                        <i class="fa fa-download"></i>
                        <span jhiTranslate="evolucionElectoral.descargarPdf">Descargar PDF</span>
                    </button>
                </div>
            </ng-template>
        </ngb-tab>
    </ngb-tabset>

</div>